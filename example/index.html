<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"> 
    <title>Sourcebuster JS &trade;</title>

    <!--[if lt IE 9]>
      <script src=”http://html5shiv.googlecode.com/svn/trunk/html5.js”></script>
    <![endif]-->

    <link rel="stylesheet" href="sourcebuster.css" />

    <script>
      var sbjs_location = '../sourcebuster.js';

      var _sbjs = _sbjs || [];
      _sbjs.push(['_setSessionLength', 15]);
      _sbjs.push(['_setBaseHost', 'statica.alexfedoseev.com']);
      _sbjs.push(['_setTimeZoneOffset', 4]);
      _sbjs.push(['_setCampaignParam', 'custom_campaign']);
      _sbjs.push(['_addOrganicSource', 'yahoo.com', 'p']);
      _sbjs.push(['_addOrganicSource', 'bing.com', 'q', 'bing']);
      _sbjs.push(['_addReferralSource', 'facebook.com', 'social']);
      _sbjs.push(['_addReferralSource', 't.co', 'social', 'twitter.com']);
      _sbjs.push(['_addReferralSource', 'plus.url.google.com', 'social', 'plus.google.com']);

      var sbjs = document.createElement('script'); sbjs.type = 'text/javascript'; sbjs.src = sbjs_location;
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sbjs, s);
    </script>

  </head>
  <body>

    <section id='wrapper'>
      <header>

        <hgroup>
          <h1>Sourcebuster JS</h1>
        </hgroup>
              
      </header>

      <section id='src-links'>
        <a href='http://www.alexfedoseev.com/post/40/sourcebuster-js' target='_blank'>About</a>&nbsp;&nbsp;&middot;&nbsp;&nbsp;<a href='https://github.com/alexfedoseev/sourcebuster-js' target='_blank'>GitHub</a>&nbsp;&nbsp;&middot;&nbsp;&nbsp;<a href='https://github.com/alexfedoseev/sourcebuster-js/archive/master.zip'>Download from GitHub</a>
      </section>

      <table>
        <tr>
          <td width='350'>
            <h3>First visit</h3>
          </td>
          <td width='350'>
            <h3>Current visit</h3>
          </td>
        </tr>
        <tr>
          <td>
            <table>
              <tr>
                <td class='sb-table-param-type'>Type:</td>
                <td class='sb-table-param-value' id='sb_first_typ'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_source:</td>
                <td class='sb-table-param-value' id='sb_first_src'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_medium:</td>
                <td class='sb-table-param-value' id='sb_first_mdm'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_campaign:</td>
                <td class='sb-table-param-value' id='sb_first_cmp'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_content:</td>
                <td class='sb-table-param-value' id='sb_first_cnt'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_term:</td>
                <td class='sb-table-param-value' id='sb_first_trm'></td>
              </tr>
            </table>
          </td>
          <td>
            <table>
              <tr>
                <td class='sb-table-param-type'>Type:</td>
                <td class='sb-table-param-value' id='sb_current_typ'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_source:</td>
                <td class='sb-table-param-value' id='sb_current_src'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_medium:</td>
                <td class='sb-table-param-value' id='sb_current_mdm'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_campaign:</td>
                <td class='sb-table-param-value' id='sb_current_cmp'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_content:</td>
                <td class='sb-table-param-value' id='sb_current_cnt'></td>
              </tr>
              <tr>
                <td class='sb-table-param-type'>utm_term:</td>
                <td class='sb-table-param-value' id='sb_current_trm'></td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
      <table>
        <tr>
          <td colspan='2'>
            <table>
              <tr>
                <td class='sb-table-param-add-type'>IP:</td>
                <td class='sb-table-param-add-value' id='sb_udata_uip'></td>
              </tr>
              <tr>
                <td class='sb-table-param-add-type'>User agent:</td>
                <td class='sb-table-param-add-value' id='sb_udata_uag'></td>
              </tr>
              <tr>
                <td class='sb-table-param-add-type'>First visit date:</td>
                <td class='sb-table-param-add-value' id='sb_first_add_fd'></td>
              </tr>
              <tr>
                <td class='sb-table-param-add-type'>Entrance point:</td>
                <td class='sb-table-param-add-value' id='sb_first_add_ep'></td>
              </tr>
              <tr>
                <td class='sb-table-param-add-type'>Current referer:</td>
                <td class='sb-table-param-add-value' id='sb_referer_ref'></td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
      
      <script type="text/javascript">

        function ie_load_bug_fix(script, callback) {
          if (script.readyState == 'loaded' || script.readyState == 'completed') {
            callback();
          } else {
            setTimeout(function() { ie_load_bug_fix(script, callback); }, 100);
          }
        }

        function place_data() {
          document.getElementById('sb_first_typ').innerHTML = get_sbjs.first.typ;
          document.getElementById('sb_first_src').innerHTML = get_sbjs.first.src;
          document.getElementById('sb_first_mdm').innerHTML = get_sbjs.first.mdm;
          document.getElementById('sb_first_cmp').innerHTML = get_sbjs.first.cmp;
          document.getElementById('sb_first_cnt').innerHTML = get_sbjs.first.cnt;
          document.getElementById('sb_first_trm').innerHTML = get_sbjs.first.trm;

          document.getElementById('sb_current_typ').innerHTML = get_sbjs.current.typ;
          document.getElementById('sb_current_src').innerHTML = get_sbjs.current.src;
          document.getElementById('sb_current_mdm').innerHTML = get_sbjs.current.mdm;
          document.getElementById('sb_current_cmp').innerHTML = get_sbjs.current.cmp;
          document.getElementById('sb_current_cnt').innerHTML = get_sbjs.current.cnt;
          document.getElementById('sb_current_trm').innerHTML = get_sbjs.current.trm;

          document.getElementById('sb_udata_uip').innerHTML = get_sbjs.udata.uip;
          document.getElementById('sb_udata_uag').innerHTML = get_sbjs.udata.uag;
          document.getElementById('sb_first_add_fd').innerHTML = get_sbjs.first_add.fd;
          document.getElementById('sb_first_add_ep').innerHTML = get_sbjs.first_add.ep;
          document.getElementById('sb_referer_ref').innerHTML = get_sbjs.referer.ref;
        }

        if (typeof get_sbjs !== 'undefined') {
          place_data();
        } else {
          if (window.addEventListener) {
            sbjs.addEventListener('load', place_data, false);
          } else if (window.attachEvent) {
            ie_load_bug_fix(sbjs, place_data);
          }
        }

      </script>

      <section id='info'>
        <h2>Test Links</h2>
        <h3>UTM</h3>
        <p>
          <a href='./?utm_source=yandex&utm_medium=cpc&utm_campaign=y_test_sourcebuster_js&utm_term=sourcebuster_js_yandex_keyword или просто ключ яндекса'>?utm_source=yandex&utm_medium=cpc&utm_campaign=y_test_sourcebuster_js...</a><br>
          <a href='./?utm_source=google&utm_medium=cpc&utm_campaign=g_test_sourcebuster_js&utm_term=sourcebuster_js_google_keyword или просто ключ гугла'>?utm_source=google&utm_medium=cpc&utm_campaign=g_test_sourcebuster_js...</a>
        </p>

        <h3>Organic</h3>
        <p>
          <a href='https://www.google.com/#q=statica+alexfedoseev+sourcebuster-js'>Google</a>
          &nbsp;&nbsp;&middot;&nbsp;&nbsp;
          Yandex (not yet)
          &nbsp;&nbsp;&middot;&nbsp;&nbsp;
          Bing (not yet)
        </p>

        <h3>Referral</h3>
        <p>
          <a href='http://alexfedoseev.livejournal.com/86404.html'>livejournal.com</a>
          &nbsp;&nbsp;&middot;&nbsp;&nbsp;
          <a href='http://www.alexfedoseev.com/post/40/sourcebuster-js'>alexfedoseev.com</a>
        </p>

        <h3>Referral Custom</h3>
        <p>
          <a href='https://twitter.com/alexfedoseev/status/481686942820478976'>Twitter</a>
          &nbsp;&nbsp;&middot;&nbsp;&nbsp;
          <a href='https://plus.google.com/+%D0%9B%D1%91%D1%88%D0%B0%D0%A4%D0%B5%D0%B4%D0%BE%D1%81%D0%B5%D0%B5%D0%B2/posts/e1NqiXSquPo'>Google+</a>
        </p>
      </section>

    </section>

    <footer>
      <p>&nbsp;</p>
    </footer>

  </body>
</html>
